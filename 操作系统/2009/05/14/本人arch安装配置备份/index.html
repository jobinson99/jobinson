<!DOCTYPE html>
<html>

    <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>【2015】本人Arch Linux安装、配置备份</title>
<meta name="description" content="黑传说的学习笔记">

<link rel="canonical" href="http://jobinson.ga/操作系统/2009/05/14/%E6%9C%AC%E4%BA%BAarch%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E5%A4%87%E4%BB%BD/">

<!-- 皮肤样式 -->
<link rel="stylesheet" href="/themes/atlas/css/style.css">

<!-- 首页和404各站特异的样式 -->
<link rel="stylesheet" href="/static/main.css">

<link rel="icon" type="image/x-icon" href="/favicon.ico">

</head>
    
  <body>

      <div class="left-top-hook"></div><!-- 站内信息 -->
<div class="right-top-hook"></div><!-- 页内信息 -->
<div class="left-middle-hook"></div><!-- 页内操作 -->
<div class="right-middle-hook"></div><!-- 页内导航 -->
<div class="right-bottom-hook"></div><!-- 站内系统 -->
<div class="left-bottom-hook"></div><!-- 站内栏目 -->

<header class="site-header">  
  <nav class="site-nav">
    <ul>
      <li><a href="/">外立面</a></li>
      <li><a href="/分类列表/">按分类查看</a></li>
      <li><a href="/话题列表/">按话题查看</a></li>
      <li><a href="/时间列表/">按时间查看</a></li>
      <li><a href="/友情链接/">好友关系</a></li>
      <li><a href="/关于我/">关于我</a></li>
    </ul>
  </nav>
  
</header>  

<nav class="outline toc">
</nav> 

      
      <div class="post">
  
  <header class="post-header">
    <h1 id="【2015】本人Arch Linux安装、配置备份">【2015】本人Arch Linux安装、配置备份</h1>

    <div class="post-abstract">
      
      <p><b>【摘要】：</b><br/></p>
      

      
      <p class="post-tag"><b>【话题】：</b>
        
        <a href="/话题列表/#archlinux-ref">archlinux
        <sup>3</sup></a>
        &nbsp;
        
        <a href="/话题列表/#linux-ref">linux
        <sup>3</sup></a>
        &nbsp;
        
        <a href="/话题列表/#安装-ref">安装
        <sup>2</sup></a>
        &nbsp;
        
      </p>
      
      
    </div>

    <p class="meta">
      
      <span class="post-categories">类别：
        
        <a href="/分类列表/#操作系统-ref">【操作系统】</a>
        
      </span>
      
      
      创建时间：2009-05-14 10:18:20
      
      
    </p>
    
  </header>

  <article class="post-content">
    <mark>由于本人不再使用archlinux，此文不再更新！！！</mark>

<p>更新时间：20150930</p>

<h3 id="arch-20150411">arch安装手记 20150411</h3>

<ol>
  <li>种子安装系统：</li>
  <li>键盘布局</li>
  <li>联网</li>
  <li>引导分区方案</li>
  <li>分区</li>
</ol>

<p>先看看已有分区状况</p>

<pre><code>lsblk /dev/sdx
lsblk | grep -v "rom\|loop\|airoot"  # 排除掉不必要的信息
</code></pre>

<p>看看某个硬盘的分区状况</p>

<pre><code>parted /dev/sdx print
</code></pre>

<p>分区：根据支持的引导不同，有三种可选工具</p>

<ul>
  <li>parted: MBR GPT</li>
  <li>fdisk, cfdisk, sfdisk: MBR GPT</li>
  <li>gdisk, cgdisk, sgdisk: GPT</li>
</ul>

<p>使用parted来分区格式化</p>

<pre><code>parted /dev/sdx
</code></pre>

<p>进入分区作业环境后，先熟悉下：</p>

<pre><code>(parted) help
(parted) quit
</code></pre>

<p>引导方式设定</p>

<pre><code>(parted) mklabel msdos
(parted) mklabel gpt
</code></pre>

<p>新建分区</p>

<pre><code>(parted) mkpart part-type fs-type start end
</code></pre>

<p>比如对应 efi：</p>

<pre><code>(parted) mkpart ESP fat32 1MiB 513MiB
(parted) set 1 boot on
(parted) mkpart primary ext4 513MiB 20.5GiB
(parted) mkpart primary linux-swap 20.5GiB 24.5GiB
(parted) mkpart primary ext4 24.5GiB 100%
</code></pre>

<p>对应bois：</p>

<pre><code>(parted) mkpart primary ext2 1MiB 100MiB
(parted) set 1 boot on
(parted) mkpart primary ext4 100MiB 20GiB
(parted) mkpart primary linux-swap 20GiB 24GiB
(parted) mkpart primary ext4 24GiB 100%
</code></pre>

<p>创建文件系统：</p>

<pre><code>lsblk /dev/sdx

mkfs.ext4 /dev/sdx1
……
</code></pre>

<p>启用swap</p>

<pre><code>mkswap /dev/sdx3
swapon /dev/sdx3
</code></pre>

<ol>
  <li>
    <p>挂载</p>

    <pre><code> mount /dev/sdx2 /mnt  # 挂载根分区 /
 mkdir -p /mnt/boot
 mount /dev/sdx1 /mnt/boot  # 挂载引导区
 mkdir -p /mnt/home
 mount /dev/sdx4 /mnt/home # 挂载家目录
</code></pre>
  </li>
  <li>
    <p>安装基本系统到目标硬盘上。
设置下镜像 
http://mirrors.aliyun.com/archlinux/$repo/os/$arch</p>
  </li>
</ol>

<p>安装基本系统和编译所需系统</p>

<pre><code>pacstrap -i /mnt base base-devel
</code></pre>

<ol>
  <li>
    <p>生成挂载表</p>

    <pre><code> genfstab -U -p /mnt &gt;&gt; /mnt/etc/fstab
 cat /mnt/etc/fstab
</code></pre>
  </li>
  <li>
    <p>篡权到目标硬盘系统上。</p>

    <pre><code> arch-chroot /mnt /bin/bash
</code></pre>
  </li>
  <li>
    <p>设置本地编码</p>

    <pre><code>nano /etc/locale.gen
</code></pre>
  </li>
</ol>

<p>设置完更新下</p>

<pre><code>locale-gen
</code></pre>

<p>设置下终端环境编码格式（中文系统此步最好忽略，不然乱码看不清。）
echo LANG=en_US.UTF-8 &gt; /etc/locale.conf</p>

<ol>
  <li>
    <p>设置字体和键盘布局，时区，硬件时间</p>

    <pre><code>nano /etc/vconsole.conf
ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
hwclock --systohc --utc
</code></pre>
  </li>
  <li>
    <p>设置启动 模组
用udev自动加载，一般不用设置：对于一些特殊硬件的固件驱动，这步就非常关键！！！！</p>
  </li>
  <li>
    <p>设置域名</p>

    <pre><code>echo myhostname &gt; /etc/hostname

nano /etc/hosts
</code></pre>
  </li>
  <li>
    <p>配置网络</p>

    <pre><code>ip link

systemctl enable dhcpcd
</code></pre>
  </li>
</ol>

<p>也可指定</p>

<pre><code>systemctl enable dhcpcd@interface_name.service
</code></pre>

<p>对于静态地址：</p>

<p>对于无线：有些需要安装无线网卡驱动</p>

<pre><code>pacman -S iw wpa_supplicant
</code></pre>

<p>对于网络，可用netctl统一配置 有线和无线</p>

<pre><code>pacman -S wpa_actiond
systemctl enable netctl-auto@interface_name.service
</code></pre>

<ol>
  <li>
    <p>生成启动镜像
检查下 /etc/mkinitcpio.conf</p>

    <pre><code>mkinitcpio -p linux
</code></pre>
  </li>
</ol>

<p>我的还有 linux-uksm-ck linux-lts</p>

<pre><code>mkinitcpio -p linux-uksm-ck
</code></pre>

<p>或者自定义配置</p>

<pre><code>mkinitcpio -c /etc/mkinitcpio-custom.conf -g /boot/linux-custom.img
</code></pre>

<ol>
  <li>
    <p>设置系统管理员密码</p>

    <pre><code>passwd
</code></pre>
  </li>
  <li>
    <p>安装启动管理器
对于bois</p>

    <pre><code>pacman -S grub os-prober
</code></pre>
  </li>
</ol>

<p>安装到硬盘引导区</p>

<pre><code>grub-install --recheck /dev/sda
</code></pre>

<p>生成配置文件</p>

<pre><code>grub-mkconfig -o /boot/grub/grub.cfg
</code></pre>

<p>对于 uefi</p>

<pre><code>pacman -S dosfstools efibootmgr
# pacman -S gummiboot
# gummiboot --path=$esp install
nano $esp/loader/entries/arch.conf
nano $esp/loader/loader.conf
</code></pre>

<ol>
  <li>
    <p>退出目标硬盘系统</p>

    <pre><code>exit
</code></pre>
  </li>
</ol>

<p>默认可自动卸载硬盘，也可手动卸载umount -R /mnt</p>

<ol>
  <li>
    <p>重启系统。</p>

    <pre><code>reboot
</code></pre>
  </li>
</ol>

<p>接下来进入桌面系统安装</p>

<blockquote>
  <p>此部分需要在终端中阅读，所以使用英文。</p>
</blockquote>

<h2 id="install-app">install app</h2>

<ol>
  <li>install the arch base base-devel</li>
  <li>reboot</li>
  <li>Update the System«===<code>pacman -Sy pacman</code>, <code>pacman -Syu</code></li>
  <li>Get Yaourt«===<code>nano /etc/pacman.conf</code> (add <code>http://repo.archlinux.fr/x86_64</code>)</li>
  <li>Quicker Download Package «===<code>nano /etc/pacman.conf</code> use curl</li>
  <li>Sound«===<code>pacman -S alsa-utils alsa-oss</code> ===»<code>alsaconf</code></li>
  <li>Video«===<code>pacman -S xorg xf86-video-ati ati-dri
libgl</code>===»systemctl start dbus–» Xorg (optional: Xorg -configure)</li>
</ol>

<p># 7,pacman -S catalyst ===»aticonfig –initial</p>

<ol>
  <li>
    <p>install desktop manager «==== systemctl enable sddm «=== pacman -S sddm </p>

    <p>note: only one dm can be enabled, so if you had been enabled another one ,please disable it at fist</p>
  </li>
  <li>
    <p>Laptop Configuration «===pacman -S acpi acpid laptop-mode-tools
cpufrequtils (acpid laptop-init) i8kutils i8kmon(for my dell laptop) 
powertop(for exact programe power consume phc-k8)</p>
  </li>
  <li>
    <p>Desktop and Office Software«===</p>

    <pre><code>pacman -S  sddm lxde lxqt kde kde-l10n-zh_cn unzip unrar w3m
wqy-zenhei ttf-dejavu ttf-liberation ttf-ms-fonts monaco-linux-font ttf-bitstream-vera
basket k3b 
calligra calligra-l10n-zh_cn libreoffice libreoffice-zh-CN
gimp inkscape blender dia 
amarok clementine smplayer vlc qt-recordmydesktop
goldendict poppler-data
fcitx-im fcitx-rime fcitx-qt5
emacs
mldonkey kmldonkey ktorrent
jre8-openjdk jdk8-openjdk firefox firefox-i18n
r stellarium celestia
freeciv wesnoth
ntfs-3g
testdisk
git abs nodejs ekiga cheese qt-curve
dosbox virtualbox virtualbox-additions qemu qtemu
</code></pre>
  </li>
  <li>
    <p>add/del user/group«=== <code>adduser gpasswd -a xxx</code> <code>userdel -r xxx</code>  <code>groupdel xxx</code>
<code>passwd -a username groupname</code> <code>passwd -d username groupname</code></p>
  </li>
  <li>
    <p>config chinese input «=== <code>nano ~/.xprofile</code></p>

    <pre><code>export LC_COLLATE="zh_CN.UTF-8"
export LC_CTYPE="zh_CN.UTF-8"
export XMODIFIERS="@im=fcitx"
export GTK_IM_MODULE=xim
export QT_IM_MODULE=xim
fcitx &amp;
</code></pre>
  </li>
  <li>Configure:nano /etc/rc.conf (en_US.utf8–»zh_CN.UTF-8 ,deamon,modules ：acpid dbus) 
nano /etc/profile(or add ~/.xprofile)
(vboxdrv,/etc/fstab,usbfs)</li>
  <li>fall asleep</li>
  <li>reboot</li>
  <li>
    <p>yaourt b43-firmware(b43),xmind,pcmanx-gtk(qterm??),aurvote, google-chrome
aliwangwang,gmchess,kchmviewer,linuxqq, kde-gtk-config,laptop-init fbterm fcitx-fbterm .etc</p>
  </li>
  <li>Fonts for Chinese«=== nano /etc/fonts/conf.avail/65-nonlatin.conf
===»move wqy up</li>
</ol>

<h2 id="section">其他安装方法</h2>

<p>arch ultimate install script
1. Install git: <code>pacman -S git</code>
2. get the script: <code>git clone git://github.com/helmuthdu/aui</code>
Without git:
3. get the script: <code>wget --no-check-certificate https://github.com/helmuthdu/aui/tarball/master -O - | tar xz</code>
4. How to use:
- default mode:<code> cd &lt;dir&gt; &amp;&amp; ./aui</code>
- ais mode: <code>cd &lt;dir&gt; &amp;&amp; ./aui --ais</code></p>

<h2 id="section-1">超级严重问题解决</h2>

<h3 id="section-2">网络问题解决</h3>

<p>作为一个基于网络的发行版，网络连接是首要核心问题：</p>

<pre><code>dhcp problem: no mtu interface /etc/dhcpd.conf
</code></pre>

<p>开启无线网络设备： <code>ifconfig wlan0 up</code>
配置无线： netcfg2</p>

<p>最麻烦的是网络模块挂了，网络不通，很麻烦，所以尽量保留dhcpcd等相关老包，以防不测。
注意，这个比保留kernel更重要，因为arch没有网络，啥都搞不定。</p>

<p>ifconfig和iwconfig，侦测有线端口和无线端口是eth0还是eth1</p>

<p>ipv6 
改DNS：</p>

<pre><code>sudo nano /etc/resolv.conf
</code></pre>

<p>添加上：</p>

<pre><code>nameserver 8.8.8.8
nameserver 8.8.4.4
nameserver 2001:470:20::2
</code></pre>

<p>改Hosts文件：</p>

<pre><code>sudo nano /etc/hosts
</code></pre>

<p>添加上：</p>

<p>重启网络：</p>

<pre><code>sudo systemctl restart NetworkManager
</code></pre>

<p>执行以下命令锁定 /etc/resolv.conf 文件，使得它不能每次重启被覆盖：</p>

<pre><code>sudo chattr +i /etc/resolv.conf
</code></pre>

<ol>
  <li>
    <p>配置无线
确定网络接口</p>

    <pre><code> lspci | grep -i net
</code></pre>
  </li>
</ol>

<p>启用接口</p>

<pre><code>ip link set wlan0 up
</code></pre>

<p>安装可能需要工具</p>

<pre><code>pacman -S wireless_tools wpa_supplicant
</code></pre>

<p>无加密的</p>

<pre><code>iwconfig wlan0 essid "xxx"
</code></pre>

<p>16进制加密</p>

<pre><code>iwconfig wlan0 essid "xxx" key 1234567890
</code></pre>

<p>ascii 密码</p>

<pre><code>iwconfig wlan0 essid "xxx" key s:asciikey
</code></pre>

<p>wpa/wpa2 加密
把账号和密码写入文件</p>

<pre><code>wpa_passphrase xxx 1234567 &gt; /etc/wpa_supplicant.conf
</code></pre>

<p>找下接入点</p>

<pre><code>iwlist wlan0 scan
</code></pre>

<p>接入</p>

<pre><code>iwconfig wlan0 essid xxx
</code></pre>

<p>使用密码</p>

<pre><code>wpa_supplicant -B -Dwext -i wlan0 -c /etc/wpa_supplicant.conf
</code></pre>

<p>然后，</p>

<pre><code>dhcpcd wlan0
</code></pre>

<ol>
  <li>
    <p>有时无法通过修改 <code>/etc/pacman.conf</code> 下载到 yaourt，可以用w3m连接到 <code>http://repo.archlinux.fr</code> ，然后下载package-query 和 yaourt，用 <code>pacman -U 安装包</code> 安装。</p>
  </li>
  <li>
    <p>可安装w3m查看网页版的软件列表，或者直接下载。</p>
  </li>
  <li>
    <p>一些软件无法下载的解决办法：解决办法详见翻墙！</p>
  </li>
</ol>

<h3 id="section-3">其他问题</h3>

<ol>
  <li>启动时屏幕花屏：</li>
</ol>

<p>这个问题是因为3d加速引起，关闭3d加速方可解决
<code>nano /etc/X11/xorg.conf.auto</code> 中，改<code>NoAccel</code>为<code>True</code></p>

<p>或者</p>

<p>到kdm阶段，登录，然后用快捷键休眠到内存，即可解决！其实重启x也是种办法！</p>

<p>systemd-halt.service
systemd-hibernate.service
systemd-shutdownd.service
systemd-suspend.service</p>

<p>kde shift-f4 休眠到内存</p>

<p>或者</p>

<p>在启动引导器配置文件，比如 /boot/grub/menu.lst的 kernel 所在行，加 “radeon.modeset=0”
若 <code>radeon.modeset=0</code>不起作用，加 <code>nomodeset</code>试试</p>

<p>若在mkinitcpio.conf 的  MODULES 中，加有 radeon ，则删除之。
然后重新生成启动用镜像 initramfs ： mkinitcpio -p linux
lsmod | grep radeon , you can switch off KMS by creating a file specifying the module options e.g. /etc/modprobe.d/radeon.conf
options radeon modeset=0
4) 重启系统</p>

<ol>
  <li>一般通用急救办法：
在grub引导的时候，第二行，加一个参数，比如3 （具体的参数作用说明可见：/etc/inittab）</li>
</ol>

<p>按Scroll Lock可以暂停启动</p>

<p>新内核：崩溃可通过扫描条形码在别的终端查看详细信息</p>

<ol>
  <li>更新周期：每周更新一次，并且只在周末更新；遇到重大更新，再延后一周，出现问题的立马更新；
凡是涉及 <strong>网络连接/内核/硬件识别相关</strong> 的更新，注意保留旧有软件包，以备不测。</li>
</ol>

<h2 id="section-4">安装问题解决</h2>

<ol>
  <li>终端下的常用软件快捷键：
    <ul>
      <li>查看文件 <code>less 文件名</code>：按 “q” =quit!</li>
      <li>nano快捷键：<code>shift-f3</code> 做选择标记（再按一次取消选择），可以实现任意选择。</li>
    </ul>
  </li>
  <li>
    <p>最新的xorg不需要生成xorg也可使用！ 但如果有问题，还是需要修改配置文件。</p>
  </li>
  <li>
    <p>让中文文件照拼音顺序排序</p>

    <p>export LC_COLLATE=”zh_CN.UTF-8”</p>
  </li>
  <li>
    <p>grub颜色：cyan/blue white/blue</p>
  </li>
  <li>
    <p>皮肤一致：用kde-gtk-config （gtk-kde4和gtk-qt-engine都需要重启程序才见效，kde-gtk-config可即时显示效果)</p>
  </li>
  <li>
    <p>摄像头 webcam:/etc/devfsd.conf</p>

    <p>REGISTER        video0       PERMISSIONS     root.users 0660</p>
  </li>
  <li>
    <p>运行java类程序: <code>java -jar XXX.jar</code>
java加速，在 Java 应用程序的启动命令中加入如下选项（使用 OpenGL硬件加速来进行渲染，
但eclipse等swt都没有效果，因为所需要的gtk版本不同）：<code>-Dsun.java2d.opengl=true</code>
openjdk 乱码：/usr/lib/jvm/java-6-openjdk/jre/lib/fontconfig.properties.src 中，
文泉绎地址指错了（改好不能立即生效，需要另存为 fontconfig.properties）
如果是jre，则只需要链接一个字体到fonts目录下即可（比如）：</p>

    <p>sudo ln -s /usr/share/fonts/wenquanyi/wqy-zenhei/wqy-zenhei.ttc /opt/java/jre/lib/fonts/fallback/
 cd /opt/java/jre/lib/fonts/fallback/
 sudo mkfontdir
 sudo mkfontscale</p>
  </li>
  <li>
    <p>附带日志的分区格式，改时间会出现错乱：如有问题，fsck查一遍分区就行了</p>
  </li>
  <li>
    <p>开启模块：modprobe 模块名 关闭模块： rmmod 模块名</p>
  </li>
  <li>
    <p>linux的启动加密:前段时间工作需要就将机子搬到实验室使用，安装mandriva的2010，下面提到的linux就是他了，另外一个是xp，采用的是grub引导的。
实验室人来人往的很杂，所以密码自然是设置的很复杂了，但是经常发现机子被人打开，发现有密码之后，对键盘的蹂躏是少不了，乱按一通，所以有了下面的措施，让我们的linux的grub启动不了，同样对由grub引导的windows也同样能够加密。
一、用超级用户执行 <code>grub-md5-crypt</code>,对grub的密码使用md5的加密方式，如果直接使用明码加密这个步骤可以省略。输入密码，需要两遍，然后就会出现加密过的密码，一串字符串，复制字符串
二、编辑/boot/grub/menu.lst 文件，在time out下面加上这行password –md5 $1$iMJtJ/$C4UwL2VrOH7Ttvb3aBWQA. 其中md5后面那串就是你刚才复制的字符串。
三、在title linux 下面加上 lock 表示启动到那里就锁住，没有输入密码就停下来，在对应的windows的title的下面也加上个lock就可以对windows的加密了。
四、重启，在grub的启动那里就停下来，你按p键，输入密码，就可以正常引导系统了。
收工，完成。</p>
  </li>
  <li>
    <p>把log留一段时间、大小限定 /etc/logroatate.conf</p>
  </li>
  <li>
    <p>dmidecode 用于获取硬件信息</p>
  </li>
  <li>安装老版本软件，cd到该目录，然后 <code>pacman -U 软件包名字</code></li>
</ol>

<p>15、中文化终端：fbterm</p>

<p>显示8万汉字，可以采取多种方案，如：unifonts5.4、宋体-方正超大字符集+新细明体EXTB、宋体-方正超大字符集+中易宋体EXTB、宋体GB18030+新细明体ExtB、宋体18030+宋体ExtB等等。
喜欢MinLiu就装Minliu+MinliuExtB，喜欢楷体就装方正楷体ExtA和ExtB。目前单个字体最多收字数无法突破超过65535，采用字体链接技术才能收录更多汉字。
FZKaiS-Extended(SIP)应该是类似于孙海峰的超大字符集字体支持包内的Sun-ExtB.ttf。
若是使用“楷体_GB2312”作为输入法外观的中文字体、而又想尽可能少些天窗或者宋体字，需要进行专门的系统字体链接。</p>

<p>16、字体问题修正：
修改/etc/fonts/conf.avail/65-nonlatin.conf文件（需root权限）：
在serif（衬线）的字体族里面，您可以保留SimSun作为中文中最优先的衬线字体（因为SimSun本身就是一种衬线字体），当然也可以把 WenQuanYi Micro Hei移到SimSun之前，以使其作为最优先的衬线字体。但需要知道，实际上WenQuanYi Micro Hei（文泉驿微米黑）是一种sans-serif（非衬线）字体。
在sans-serif（非衬线）的字体族里面，把WenQuanYi Micro Hei移到SimSun之前，以使其作为最优先的非衬线字体。
在monospace（等宽）的字体组里面，把WenQuanYi Micro Hei Mono移到NSimSun之前，以使其作为最优先的等宽字体。</p>

<ol>
  <li>
    <p>提升qt图形性能</p>

    <p>yaourt kcm-qt-graphicssystem
mkdir .kde4/env</p>
  </li>
</ol>

<p>系统设置：qt-graphicsystem选raster、</p>

<ol>
  <li>
    <p>重载 Plasma
有时你可能想重新载入 Plasma，像是修改了系统语言后为了能直接出效果，或是因为桌面出了什么问题。
可以这样操作，打开终端，运行下列命令：</p>

    <p>kquitapp plasma-desktop
plasma-desktop</p>
  </li>
</ol>

<p>另一种方法，是直接退出桌面：</p>

<pre><code>systemctl restart kdm
</code></pre>

<ol>
  <li>
    <p>KDM 的鼠标主题
改成跟 Plasma 的 Oxygen White 鼠标一致的，新建文件：
/usr/share/icons/default/index.theme
内容：</p>

    <p>[Icon Theme]
Name = Oxygen White
Comment = Default icon theme.(Oxygen mouse theme. Oxygenize your desktop!)
Inherits = Oxygen_White</p>
  </li>
  <li>
    <p>kde头像不能更改，提示管理员禁止你更改图像
系统设置-登录屏幕-用户-用户图像来源-改成“用户，系统”或是“用户”，（但是这里下边的“用户图片”貌似和账户细节中的图像不相关，改了好像没用）然后应用保存亦可注销一下。上面的步骤之后再回到“账户细节”里面更改图像。</p>
  </li>
</ol>

<p>21、笔记本降压设定：phc 或者cpupowerd
laptop-init(cpufreq pm-utils laptop-mode之总开关)</p>

<ol>
  <li>
    <p>如何实现在虚拟机下让玩的游戏全屏？ 比如星际和暗黑，
把主系统的分辨率调成游戏分辨率，我玩暗黑2的时候就是这样的。
主系统1024x768，暗黑分辨率是800x600，我的显示器是19寸的。</p>
  </li>
  <li>
    <p>如何限制某个进程的io，以免被占用过大而卡死系统：cgroup</p>
  </li>
  <li>
    <p>获取md5sum sha1sum等……</p>

    <pre><code>md5sum xxx
sha1sum xxx
</code></pre>
  </li>
</ol>

<h2 id="section-5">学习和应急技巧：</h2>

<ol>
  <li>样例学习：先安装archlive 或者chakra之类的，看看别人搞定之后的模样和配置</li>
  <li>记得安装kernel-lts kernel-lts-header这样升内核挂了的话，可以从这个内核启动</li>
</ol>

<p>滚挂过好几次了，一次最严重的是引导器，搞得我现在还有120G的备份等着恢复，一般的崩溃就是x起不来，或者显卡驱动挂了。
还有一种滚挂的情况是升级的时候断电，这种最严重，台式机会经常出现。升级过程中断电的严重性，是因为这种可以把pacman啊什么的最基础的东西都给滚没了，
而且你还不知道问题出在那，一般遇到这种情况，都是直接从别处复制最基本的东西进去，然后几乎完全重装一次。</p>

<ol>
  <li>arch硬盘安装：</li>
</ol>

<p>A、先提取光盘中的/boot下的两个文件夹，分别是64和32位的启动引导程序，把这两个文件夹放到U盘的/arch文件夹下。</p>

<p>然后把光盘拷到U盘根目录下。</p>

<p>B、写menu.lst</p>

<pre><code>title arch64
root (hd0,3)
kernel /arch/x86_64/vmlinuz26 archisolabel=ARCH_201005
initrd /arch/x86_64/archiso.img
</code></pre>

<p>root (hd0,3)是我的U盘。然后用U盘启动，U盘我安装了grub4dos来引导。</p>

<p>C、启动后和2009.08的ISO一样，貌似会找不到光盘，进入一个shell。
下来先mount 硬盘分区（我挂的当然是U盘），然后使用losetup将ISO文件挂到某个loop设备上面，退出shell就行了，</p>

<p>和2009.08ISO的硬盘安装不一样的是，这里不需要将这个loop设备进行软链接这一步。我试了一下，多了这一步貌似还出问题。</p>

<pre><code>#mkdir /usb
#mount -t vfat /dev/sdb4 /usb
#modprobe loop
#losetup /dev/loop3 /usb/archlinux-2010.05-netinstall-dual.iso
</code></pre>

<p>这是个例子，您需要把有关参数改成您自己的。需说明的是，我的U盘，在U盘启动时被认成(hd0,3)/sda4，但进入shell之前，系统提示扫描了sdb4，这时挂载/dev/sdb4就可以，挂/dev/sda4就错了，挺奇怪的。
这是我以前硬盘安装2009.08ISO时发现的，所以，如果进入shell后，您挂不对放光盘的硬盘分区，其实进入shell之前是有提示的。</p>

<p>挂完后退出shell，系统就正常进入到安装环境。然后输入root，回车，再输入/arch/setup进行安装。
接下来我没有继续尝试安装，由于是用的网络安装，应该不牵扯链接本地源的问题。这个就是让新手少走弯路，有需要硬盘安装的，可以试试，仅做参考。</p>


  </article>

  <!-- 文章页面尾部设定 -->
<div class="post-end">
  
  <!-- 有言评论 -->
  <div id="uyan_frame">
    <h2>■评论</h2>
  </div>
  <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1921243"></script>

  <!-- 结束有言评论 -->

  <div class="post-shift">

    <!--上一篇 话题 下一篇-->
    
    <div class="post-pre">
      <a href="/敦煌之路/2009/05/09/%E6%B8%B8%E6%88%8F%E6%98%AF%E6%9C%80%E6%96%B0%E7%9A%84%E6%96%87%E5%8C%96%E4%BC%A0%E6%89%BF%E6%A8%A1%E5%BC%8F/">游戏是最新的文化传承模式◁◀前篇</a>
    </div>
    
    
    <!--回到头部-->
    <div class="back-top"><a href="#【2015】本人Arch Linux安装、配置备份">△▲回头▲△</a></div> 
    
    
    <div class="post-next">
      <a href="/敦煌之路/2009/05/14/%E4%B8%8D%E5%86%8D%E8%8D%92%E4%BA%86%E5%87%BA%E5%B1%B1/">后篇▶▷不再荒了，出山</a>
    </div>
    
    
  </div>

  <!--页面底部自动浮现-->
  <div class="post-reletive">
    <!--相关文章-->

  </div>

</div>


  <footer class="site-footer">
  <ul>
    <li>
      <span>©2015版权所有：黑传说</span>
      <span>欢迎转载，请注明出处并保留原文链接，谢谢合作！</span>
    </li>
    <li>
    <span>黑传说——乌抵天明</span>
    <span>玄鸟负日，光明万丈</span>
    </li>    
    <li>
    <span><a href="mailto:gmail for jobinson99">gmail for jobinson99</a></span>
    <span><a href="/feed.xml">戳此处关注我</a></span>
    <span><a href="https://github.com/jobinson99">我的开发仓库</a></span>
    </li>    
    <li>
      <span>致谢： </br>
        <a href="http://www.github.com">空间：github</a>，
        <a href="http://jekyllrb.com">构建：jekyll</a>，
        <a href="http://freenom.com/">域名：freenom</a>，
        以及一切对本人有帮助的人事物！</span>
      <span>
        <!--百度统计-->
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fcc95332ab242dd5093ad15fa3eecb313' type='text/javascript'%3E%3C/script%3E"));
</script>

      </span>
    </li>
  </ul>
</footer>


    

  
</div>




      
    <script data-main="/themes/atlas/javascript/main" src="/themes/atlas/javascript/require.js" defer async="true"></script>
    
  </body>
</html>
