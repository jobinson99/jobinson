<!DOCTYPE html>
<html>

    <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>cygwin配置之包管理和伺服</title>
<meta name="description" content="黑传说的学习笔记">

<link rel="canonical" href="http://jobinson.ga/%E8%BD%AF%E4%BB%B6%E7%94%9F%E4%BA%A7%E7%BA%BF/2015/04/15/cygwin%E9%85%8D%E7%BD%AE%E4%B9%8B%E5%8C%85%E7%AE%A1%E7%90%86%E5%92%8C%E6%9C%8D%E5%8A%A1/">

<!-- 皮肤样式 -->
<link rel="stylesheet" href="/themes/atlas/css/style.css">

<!-- 首页和404各站特异的样式 -->
<link rel="stylesheet" href="/static/main.css">

<link rel="icon" type="image/x-icon" href="/favicon.ico">

</head>
    
  <body>

      <div class="left-top-hook"></div><!-- 站内信息 -->
<div class="right-top-hook"></div><!-- 页内信息 -->
<div class="left-middle-hook"></div><!-- 页内操作 -->
<div class="right-middle-hook"></div><!-- 页内导航 -->
<div class="right-bottom-hook"></div><!-- 站内系统 -->
<div class="left-bottom-hook"></div><!-- 站内栏目 -->

<header class="site-header">  
  <nav class="site-nav">
    <ul>
      <li><a href="/">外立面</a></li>
      <li><a href="/分类列表/">按分类查看</a></li>
      <li><a href="/话题列表/">按话题查看</a></li>
      <li><a href="/时间列表/">按时间查看</a></li>
      <li><a href="/友情链接/">好友关系</a></li>
      <li><a href="/关于我/">关于我</a></li>
    </ul>
  </nav>
  
</header>  

<nav class="outline toc">
</nav> 

      
      <div class="post">
  
  <header class="post-header">
    <h1 id="cygwin配置之包管理和伺服">cygwin配置之包管理和伺服</h1>

    <div class="post-abstract">
      
      <p><b>【摘要】：</b><br/></p>
      

      
      <p class="post-tag"><b>【话题】：</b>
        
        <a href="/话题列表/#cygwin-ref">cygwin
        <sup>1</sup></a>
        &nbsp;
        
        <a href="/话题列表/#包管理-ref">包管理
        <sup>1</sup></a>
        &nbsp;
        
        <a href="/话题列表/#伺服模式-ref">伺服模式
        <sup>1</sup></a>
        &nbsp;
        
      </p>
      
      
    </div>

    <p class="meta">
      
      <span class="post-categories">类别：
        
        <a href="/分类列表/#软件生产线-ref">【软件生产线】</a>
        
      </span>
      
      
      创建时间：2015-04-15 15:59:02
      
      
    </p>
    
  </header>

  <article class="post-content">
    <p>由于用了大概半年左右的cygwin，把使用过程中遇到的问题和解决方法整理记录下。</p>

<h2 id="cygwin-">cygwin 包管理工具</h2>

<p>cygwin有一个软件管理工具apt-cyg 类似于debian的apt-get，有了这个就方便多了。</p>

<p>安装：</p>

<pre><code>lynx -source rawgit.com/transcode-open/apt-cyg/master/apt-cyg &gt; apt-cyg
install apt-cyg /bin
</code></pre>

<p>使用：</p>

<pre><code>apt-cyg install nano
</code></pre>

<p>可用操作：</p>

<table>
  <thead>
    <tr>
      <th>命令</th>
      <th>说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>apt-cyg remove</td>
      <td>删除</td>
    </tr>
    <tr>
      <td>apt-cyg update</td>
      <td>升级</td>
    </tr>
    <tr>
      <td>apt-cyg depends</td>
      <td>某软件的依赖的列表</td>
    </tr>
    <tr>
      <td>apt-cyg rdepends</td>
      <td>依赖某软件的列表</td>
    </tr>
    <tr>
      <td>apt-cyg list</td>
      <td>列出本地软件</td>
    </tr>
    <tr>
      <td>apt-cyg listall</td>
      <td>列出本地和远程软件</td>
    </tr>
    <tr>
      <td>apt-cyg show</td>
      <td>某软件信息</td>
    </tr>
    <tr>
      <td>apt-cyg category</td>
      <td>列出某类软件列表</td>
    </tr>
    <tr>
      <td>apt-cyg search</td>
      <td>搜寻本地软件</td>
    </tr>
    <tr>
      <td>apt-cyg seacrchall</td>
      <td>搜寻本地和远程软件</td>
    </tr>
  </tbody>
</table>

<h2 id="cygwin--1">【转】cygwin 伺服模式</h2>

<p>cygserver 服务器，用于运行大型的应用。Cygwin有一些特殊的功能, 如IPC Message Queues（消息队列）, XSI IPC Semaphores, XSI IPC Shared Memory（共享内存），默认是没有打开的，要想使用这些功能, 必须先启动cygserver程序或服务。</p>

<p>启用的方法如下：终端执行:</p>

<pre><code>cygserver-config # 按照提示配置
net start cygserver #cygserver作为Windows操作系统的一个服务运行
net stop cygserver #停止cygserver, 也可以在Windows任务管理器里结束进程
</code></pre>

<p>在$CYGWIN/Cygwin.bat里添加下面的配置:</p>

<pre><code>$set CYGWIN=server
</code></pre>

<p>当然你也可以在每次需要的时候手动启动:</p>

<pre><code>cygwinserver &amp;
</code></pre>

<p>或者在 ~/.bashrc 添加如下内容（或者在windows环境变量里面配置）</p>

<pre><code>CYGWIN=server
export CYGWIN
</code></pre>

<p>执行</p>

<pre><code>. ~/.bashrc  #让其生效。
cygserver-config
net start cygserver
</code></pre>

<h2 id="cygwin">cygwin崩溃信息收集</h2>

<p>在缺省的 cygwin 环境下出错时并不产生 core 文件，而是产生一个stackdump文件，该文件所含信息比core文件少，不能当作core文件使用，为了产生真正的core文件，可以配置好下面的环境变量：</p>

<pre><code>set CYGWIN="$CYGWIN error_start=dumper.exe -d %1 %2"(在d:\cygwin\Cygwin.bat文件里)
</code></pre>

<p>或者:</p>

<pre><code>export CYGWIN="$CYGWIN error_start=dumper.exe -d %1 %2"(在.bashrc文件里)
</code></pre>

<p>coredump时, cygwin会调用dumper.exe程序在当前目录下产生core文件. 但是不要对这个core文件抱太大的指望. 根据我的经验, 很多时候用bt列出的调用栈都是不可用的. 我也不知道为什么. 全局变量好像可以查看.</p>

<h2 id="section">字体设定</h2>

<p>cygwin使用windows的字体：默认不使用win的字体，下面命令把win字体软链到cygwin环境下，然后刷新字体缓存（给cygwin安装新字体也需要步骤），最后列出字体看看是不是已经加进来了。</p>

<pre><code>ln -s /cygdrive/c/Windows/Fonts /usr/share/fonts/win-fonts
fc-cache
fc-list
</code></pre>

<p>mintty的字体：？？？</p>

<h2 id="section-1">读取本地分区</h2>

<p>cygwin如何读取本地分区？在cygdrive里，有本地分区的连接。</p>

<h2 id="cygwinbabun">配置好的cygwin：babun</h2>

<p>如果自己配置觉得麻烦（其实也没啥需要配置的），可以使用已经配置好cygwin的 <a href="http://babun.github.io/">Babun</a> ，其中有些功能，比如：</p>

<ul>
  <li>pact – 软件包管理器</li>
  <li>集成oh-my-zsh</li>
  <li>配置好的git和shell</li>
  <li>自动升级</li>
</ul>

<p>Babun的安装也非常简单，从它的主页下载压缩包，解压，双击执行install.bat。</p>

<p>但是：在win7 babun下，emacs图形界面版有问题！！！</p>


  </article>

  <!-- 文章页面尾部设定 -->
<div class="post-end">
  
  <!-- 有言评论 -->
  <div id="uyan_frame">
    <h2>■评论</h2>
  </div>
  <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1921243"></script>

  <!-- 结束有言评论 -->

  <div class="post-shift">

    <!--上一篇 话题 下一篇-->
    
    <div class="post-pre">
      <a href="/%E8%BD%AF%E4%BB%B6%E7%94%9F%E4%BA%A7%E7%BA%BF/2015/04/14/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91%E4%B9%8B%E7%A9%BF%E6%A2%AD%E5%A4%9A%E4%B8%AA%E7%B3%BB%E7%BB%9F%E5%B9%B3%E5%8F%B0/">跨平台开发：穿梭多个系统平台的统一开发环境【初探】◁◀前篇</a>
    </div>
    
    
    <!--回到头部-->
    <div class="back-top"><a href="#cygwin配置之包管理和伺服">△▲回头▲△</a></div> 
    
    
    <div class="post-next">
      <a href="/%E6%8A%80%E6%9C%AF%E8%A7%86%E9%87%8E/2015/04/19/%E4%BA%94%E7%AC%94%E5%88%92%E6%99%BA%E8%83%BD%E8%BE%93%E5%85%A5%E6%B3%95%E7%9C%9F%E7%9A%84%E5%BF%AB/">后篇▶▷五笔划+智能输入真的快</a>
    </div>
    
    
  </div>

  <!--页面底部自动浮现-->
  <div class="post-reletive">
    <!--相关文章-->

  </div>

</div>


  <footer class="site-footer">
  <ul>
    <li>
      <span>©2015版权所有：黑传说</span>
      <span>欢迎转载，请注明出处并保留原文链接，谢谢合作！</span>
    </li>
    <li>
    <span>黑传说——乌抵天明</span>
    <span>玄鸟负日，光明万丈</span>
    </li>    
    <li>
    <span><a href="mailto:gmail for jobinson99">gmail for jobinson99</a></span>
    <span><a href="/feed.xml">戳此处关注我</a></span>
    <span><a href="https://github.com/jobinson99">我的开发仓库</a></span>
    </li>    
    <li>
      <span>致谢： </br>
        <a href="http://www.github.com">空间：github</a>，
        <a href="http://jekyllrb.com">构建：jekyll</a>，
        <a href="http://freenom.com/">域名：freenom</a>，
        以及一切对本人有帮助的人事物！</span>
      <span>
        <!--百度统计-->
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fcc95332ab242dd5093ad15fa3eecb313' type='text/javascript'%3E%3C/script%3E"));
</script>

      </span>
    </li>
  </ul>
</footer>


    

  
</div>




      
    <script data-main="/themes/atlas/javascript/main" src="/themes/atlas/javascript/require.js" defer async="true"></script>
    
  </body>
</html>
