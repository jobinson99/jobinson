<!DOCTYPE html>
<html>

    <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>跨平台开发：穿梭多个系统平台的统一开发环境</title>
<meta name="description" content="黑传说的学习笔记">

<link rel="canonical" href="http://jobinson.ga/%E8%BD%AF%E4%BB%B6%E7%94%9F%E4%BA%A7%E7%BA%BF/2015/04/14/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91%E4%B9%8B%E7%A9%BF%E6%A2%AD%E5%A4%9A%E4%B8%AA%E7%B3%BB%E7%BB%9F%E5%B9%B3%E5%8F%B0/">

<!-- 皮肤样式 -->
<link rel="stylesheet" href="/themes/atlas/css/style.css">

<!-- 首页和404各站特异的样式 -->
<link rel="stylesheet" href="/static/main.css">

<link rel="icon" type="image/x-icon" href="/favicon.ico">

</head>
    
  <body>

      <div class="left-top-hook"></div><!-- 站内信息 -->
<div class="right-top-hook"></div><!-- 页内信息 -->
<div class="left-middle-hook"></div><!-- 页内操作 -->
<div class="right-middle-hook"></div><!-- 页内导航 -->
<div class="right-bottom-hook"></div><!-- 站内系统 -->
<div class="left-bottom-hook"></div><!-- 站内栏目 -->

<header class="site-header">  
  <nav class="site-nav">
    <ul>
      <li><a href="/">外立面</a></li>
      <li><a href="/分类列表/">按分类查看</a></li>
      <li><a href="/话题列表/">按话题查看</a></li>
      <li><a href="/时间列表/">按时间查看</a></li>
      <li><a href="/友情链接/">好友关系</a></li>
      <li><a href="/关于我/">关于我</a></li>
    </ul>
  </nav>
  
</header>  

<nav class="outline toc">
</nav> 

      
      <div class="post">
  
  <header class="post-header">
    <h1 id="跨平台开发：穿梭多个系统平台的统一开发环境">跨平台开发：穿梭多个系统平台的统一开发环境</h1>

    <div class="post-abstract">
      
      <p><b>【摘要】：</b><br/></p>
      

      
      <p class="post-tag"><b>【话题】：</b>
        
        <a href="/话题列表/#跨平台-ref">跨平台
        <sup>1</sup></a>
        &nbsp;
        
        <a href="/话题列表/#虚拟机-ref">虚拟机
        <sup>3</sup></a>
        &nbsp;
        
      </p>
      
      
    </div>

    <p class="meta">
      
      <span class="post-categories">类别：
        
        <a href="/分类列表/#软件生产线-ref">【软件生产线】</a>
        
      </span>
      
      
      创建时间：2015-04-14 22:34:19
      
      
    </p>
    
  </header>

  <article class="post-content">
    <h2 id="section">遇到的问题：</h2>

<p>刚好接了朋友一个烂尾工程，工程一开始是用.net开发的，很乱。</p>

<p>由于本人已经好多年在linux下生存，所有的生态链全部是用linux的，我需要用命令行，需要用软链，需要用emacs等，我需要统一整齐的管理文件。对win实在用的不习惯。
window下搞开发实在很不方便，比如nodejs之类的构建就很麻烦，而且用我的emacs之类的也很不方便。</p>

<p>于是，经过几天郁闷的双电脑+双手机开发后，终于想到怎么解决 穿梭在各个平台设备的 问题。</p>

<p>另外，项目经过分析之后，因为考虑到还需要构建两个适用于 安卓和苹果 系统的应用，未来可能还需要更多的应用编译。发现其实可以：.net继续后台，前台全部换用js。</p>

<p>如果，后面如果还是我负责，那就全换了。</p>

<p>先总结下：</p>

<h2 id="section-1">我的需求：</h2>

<p>我的设备：一个手机（应该是两部，一部刚好换掉了），两台电脑（一台自己多年用的，所有东西都在上面，一台是项目的，里面有各种）</p>

<p>需求：平时开发只用一台电脑，碎片时间用手机，在这台电脑和手机里，使用我熟悉和方便的工具。</p>

<h2 id="section-2">解决方案</h2>

<p>自己电脑：开发所需的东西，全用 git管理起来，可公开的全部github，不好公开的全部bitbucket 私库。</p>

<p>项目的电脑：使用虚拟机，并且把虚拟机快照化，这样可以快速启动所需的环境。</p>

<p>为了以备不时之需，还装了cygwin+emacs。</p>

<p>win版emacs？也装了，总之三处配置是统一的，为了使用跨平台的终端，配置了eshell和emacs git。</p>

<p>手机：</p>

<p>一个编辑器+一个可管理git的工具。</p>

<h3 id="cygwin-">【转】cygwin 配置</h3>

<p>cygserver 服务器，用于运行大型的应用。Cygwin有一些特殊的功能, 如IPC Message Queues, XSI IPC Semaphores, XSI IPCShared Memory.默认是没有打开的，要想使用这些功能, 必须先启动cygserver程序或服务</p>

<p>cygserver可以作为一个服务安装, 启用的方法如下：终端执行:</p>

<pre><code>$cygserver-config(按照提示配置)
$net start cygserver(cygserver作为Windows操作系统的一个服务运行)
$net stop cygserver(停止cygserver, 也可以在Windows任务管理器里结束进程)
</code></pre>

<p>在$CYGWIN/Cygwin.bat里添加下面的配置:</p>

<pre><code>$set CYGWIN=server
</code></pre>

<p>当然你也可以在每次需要的时候手动启动:</p>

<pre><code>$cygwinserver &amp;
</code></pre>

<p>或者在 ~/.bashrc 添加如下内容（或者在windows环境变量里面配置）</p>

<pre><code>CYGWIN=server
export CYGWIN
</code></pre>

<p>执行 . ~/.bashrc 让其生效</p>

<p>执行cygserver-config，并启动cygserver，</p>

<pre><code>net start cygserver
</code></pre>

<p>cygwin崩溃信息收集</p>

<p>在缺省的 cygwin 环境下出错时并不产生 core 文件，而是产生一个stackdump文件，该文件所含信息比core文件少,不能当作core文件使用.为了产生真正的core文件，可以配置好下面的环境变量：</p>

<pre><code>set CYGWIN="$CYGWIN error_start=dumper.exe -d %1 %2"(在d:\cygwin\Cygwin.bat文件里)
</code></pre>

<p>或者:</p>

<pre><code>export CYGWIN="$CYGWIN error_start=dumper.exe -d %1 %2"(在.bashrc文件里)
</code></pre>

<p>coredump时, cygwin会调用dumper.exe程序在当前目录下产生core文件. 但是不是对这个core文件抱太大的指望. 根据我的经验, 很多时候用bt列出的调用栈都是不可用的. 我也不知道为什么. 全局变量好像可以查看.</p>

<h3 id="section-3">几个虚拟机：</h3>

<p>思考：与其在一台电脑上构建一个cygwin，还不如直接虚拟机，或者闪盘系统呢！！！这样统一。
如果是小系统拷到内存中。反正现在内存够。</p>

<p>准备工作：</p>

<ul>
  <li>看看自己主板是不是开启支持 硬件虚拟技术（Hardware Virtualization Technology (VT)），没开启就到bois开启。</li>
  <li><a href="https://www.virtualbox.org/wiki/Downloads">vbox下载地址</a>，根据宿主机操作系统类型选择下载。另外，还需要扩展下载，也就是那个<a href="">VirtualBox 4.3.26 Oracle VM VirtualBox Extension Pack</a></li>
</ul>

<p>本人的宿主机是win7，安装vbox问题，解决办法：</p>

<ul>
  <li>路径不含中文名</li>
  <li>
    <p>恢复系统主题</p>
  </li>
  <li>开发用：sabayon 或者 archlinux+lxde 或者其他小型窗口管理器。用户名：archdev，密码：archdev。开发环境emacs，编译环境io.js cordova </li>
  <li>运行应用用：
    <ul>
      <li>给php的：coreos（网络不通！！！！）或者其他极简部署用系统 使用ubuntu server php 密码 php。 运行php类，java类，</li>
      <li>给 .net的：win 2008 server运行.net类，主机极致化。密码：1234567890</li>
    </ul>
  </li>
  <li>编译测试需要：
    <ul>
      <li>安卓虚拟机</li>
      <li>ios</li>
    </ul>
  </li>
</ul>

<p>sabayon 虽然根源于gentoo，但其灵活机制，使得大部分不用编译。多版本支持。
两套：</p>

<ul>
  <li>entropy用来管理二进制包，相当于archlinux pacman</li>
  <li>portage 用来管理源码包，相当于 archlinux makepkg abs</li>
</ul>

<p>安装有问题，直接下载镜像解决。两个预定的用户名和密码： root/sabayon; sabayon/sabayon</p>

<p><a href="http://virtualboxes.org/tag/ova">虚拟机镜像下载</a></p>

<p><a href="http://kickass.to">镜像搜索</a></p>

<p>主要配置：文件共享和网络服务</p>

<p>window下：</p>

<pre><code>net use x: \\vboxsvr\share
</code></pre>

<h3 id="win">win系统需求</h3>

<p>win10的虚拟机所需资源:</p>

<pre><code>Processor : 1GHz or faster with support for PAE, NX, and SSE2
RAM : 1GB (32-bit) or 2GB (64-bit)
Hard disk space : 16GB
</code></pre>

<p>Enable PAE/NX</p>

<h3 id="ios">ios虚拟机安装手记</h3>

<p>下载镜像后，选择导入即可。</p>

<p>因为版本本身不稳定（比如点击 Apple icon –&gt; About This Mac，系统会崩溃），需要用 sw_vers 检查下版本：在启动界面，使用键盘快捷键Cmd + Space，开启命令行。（此处注意不要点按钮，会崩溃的）</p>

<p>键盘输入问题：安装 <a href="http://doublecommand.sourceforge.net/">DoubleCommand</a>，配置适合自己的输入方式。</p>

<p>然后<a href="http://developer.apple.com/programs/register/">注册苹果账号</a>，下载Xcode  和 iOS SDK。</p>

<p>打开工程项目文件  hello/platforms/ios/hello.xcodeproj</p>

<h3 id="section-4">手机</h3>

<p><a href="http://www.appsfinder.fr">查找应用</a>
<a href="http://appcrawlr.com">另一个查找应用的地方</a></p>

<h3 id="section-5">在手机上运行各种应用</h3>

<p>有空可探索：</p>

<ul>
  <li>Android + Linux Chroot + Node.js</li>
  <li>firefoxos + </li>
  <li>JXCore One of the key features in the recent release was the ability to run Node.js applications on mobile, both Android and iOS, while leveraging the full Node.js ecosystem on npm.</li>
</ul>

<p>除去直接硬刷linux系统到手机上外，还有三个软办法：</p>

<p>一是获得root权限，然后安装busybox之类的。另一个是编译安装 一个包管理器（等有空折腾debian的dpkg），最后一个比较方便的是 安卓上的编程环境 terminalIDE。</p>

<p>英文输入键盘：手写用 writepad
英文虚拟电脑键盘用：terminal ide的键盘</p>

<p>生成 身份认证：和linux上的ssh-keygen不同。</p>

<pre><code>mkdir ~/.ssh        
dropbearkey -t rsa -f ~/.ssh/id_rsa
dropbearkey -y -f ~/.ssh/id_rsa | grep "^ssh-rsa" &gt;&gt; my_keydropbearkey -y -f ~/.ssh/id_rsa | sed -n 2p &gt; ~/.ssh/id_rsa.pub
</code></pre>

<p>第一条命令是新建文件夹，第二条命令是 生成 私钥，第三条是本地安全管道开启密钥认证，第四条是把公钥拷到 <em>my_key</em> 上，然后把 <em>my_key</em> 拷到所需的git服务器上。</p>

<p>修改下本地的配置</p>

<p>新建一文件 ~/sssh （名字随意，只要下面相应改下对应的），内容如下：</p>

<pre><code>#!/data/data/com.spartacusrex.spartacuside/files/system/bin/bash
exec ssh -i ~/.ssh/id_rsa "$@"
</code></pre>

<p>修改下执行权限和修改配置文件 ~/.bashrc</p>

<pre><code>chmod 755 ~/sssh
echo export GIT_SSH=~/sssh &gt;&gt; .bashrc
</code></pre>

<p>到这步搞定！</p>


  </article>

  <!-- 文章页面尾部设定 -->
<div class="post-end">
  
  <!-- 有言评论 -->
  <div id="uyan_frame">
    <h2>■评论</h2>
  </div>
  <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1921243"></script>

  <!-- 结束有言评论 -->

  <div class="post-shift">

    <!--上一篇 话题 下一篇-->
    
    <div class="post-pre">
      <a href="/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/2015/02/09/%E6%88%91%E5%9D%8E%E5%9D%B7%E7%9A%84%E6%8A%80%E6%9C%AF%E4%B9%8B%E8%B7%AF/">我坎坷的技术之路◁◀前篇</a>
    </div>
    
    
    <!--回到头部-->
    <div class="back-top"><a href="#跨平台开发：穿梭多个系统平台的统一开发环境">△▲回头▲△</a></div> 
    
    
    
  </div>

  <!--页面底部自动浮现-->
  <div class="post-reletive">
    <!--相关文章-->

  </div>

</div>


  <footer class="site-footer">
  <ul>
    <li>
      <span>©2015版权所有：黑传说</span>
      <span>欢迎转载，请注明出处并保留原文链接，谢谢合作！</span>
    </li>
    <li>
    <span>黑传说——乌抵天明</span>
    <span>玄鸟负日，光明万丈</span>
    </li>    
    <li>
    <span><a href="mailto:gmail for jobinson99">gmail for jobinson99</a></span>
    <span><a href="/feed.xml">戳此处关注我</a></span>
    <span><a href="https://github.com/jobinson99">我的开发仓库</a></span>
    </li>    
    <li>
      <span>致谢： </br>
        <a href="http://www.github.com">空间：github</a>，
        <a href="http://jekyllrb.com">构建：jekyll</a>，
        <a href="http://freenom.com/">域名：freenom</a>，
        以及一切对本人有帮助的人事物！</span>
      <span>
        <!--百度统计-->
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fcc95332ab242dd5093ad15fa3eecb313' type='text/javascript'%3E%3C/script%3E"));
</script>

      </span>
    </li>
  </ul>
</footer>


    

  
</div>




      
    <script data-main="/themes/atlas/javascript/main" src="/themes/atlas/javascript/require.js" defer async="true"></script>
    
  </body>
</html>
