<!DOCTYPE html>
<html>

    <head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>跨平台开发：穿梭多个系统平台的统一开发环境</title>
<meta name="description" content="黑传说的学习笔记">

<link rel="canonical" href="http://jobinson.ga/%E8%BD%AF%E4%BB%B6%E7%94%9F%E4%BA%A7%E7%BA%BF/2015/04/14/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91%E4%B9%8B%E7%A9%BF%E6%A2%AD%E5%A4%9A%E4%B8%AA%E7%B3%BB%E7%BB%9F%E5%B9%B3%E5%8F%B0/">

<!-- 皮肤样式 -->
<link rel="stylesheet" href="/themes/atlas/css/style.css">

<!-- 首页和404各站特异的样式 -->
<link rel="stylesheet" href="/static/main.css">

<link rel="icon" type="image/x-icon" href="/favicon.ico">

</head>
    
  <body>

      <div class="left-top-hook"></div><!-- 站内信息 -->
<div class="right-top-hook"></div><!-- 页内信息 -->
<div class="left-middle-hook"></div><!-- 页内操作 -->
<div class="right-middle-hook"></div><!-- 页内导航 -->
<div class="right-bottom-hook"></div><!-- 站内系统 -->
<div class="left-bottom-hook"></div><!-- 站内栏目 -->

<header class="site-header">  
  <nav class="site-nav">
    <ul>
      <li><a href="/">外立面</a></li>
      <li><a href="/分类列表/">按分类查看</a></li>
      <li><a href="/话题列表/">按话题查看</a></li>
      <li><a href="/时间列表/">按时间查看</a></li>
      <li><a href="/友情链接/">好友关系</a></li>
      <li><a href="/关于我/">关于我</a></li>
    </ul>
  </nav>
  
</header>  

<nav class="outline toc">
</nav> 

      
      <div class="post">
  
  <header class="post-header">
    <h1 id="跨平台开发：穿梭多个系统平台的统一开发环境">跨平台开发：穿梭多个系统平台的统一开发环境</h1>

    <div class="post-abstract">
      
      <p><b>【摘要】：</b><br/></p>
      

      
      <p class="post-tag"><b>【话题】：</b>
        
        <a href="/话题列表/#跨平台-ref">跨平台
        <sup>1</sup></a>
        &nbsp;
        
        <a href="/话题列表/#虚拟机-ref">虚拟机
        <sup>3</sup></a>
        &nbsp;
        
      </p>
      
      
    </div>

    <p class="meta">
      
      <span class="post-categories">类别：
        
        <a href="/分类列表/#软件生产线-ref">【软件生产线】</a>
        
      </span>
      
      
      创建时间：2015-04-14 22:34:19
      
      
    </p>
    
  </header>

  <article class="post-content">
    <h2 id="section">遇到的问题：</h2>

<p>刚好接了朋友一个烂尾工程，工程用.net开发的，很乱。</p>

<p>由于本人已经好多年在linux下生存，所有的生态链全部是用linux的，我需要用命令行，需要用软链，需要用emacs等，我需要统一整齐的管理文件，我不想用盗版软件！！！</p>

<p>win实在太慢了，配置那么高级的电脑用各种软件却比我十年前标准配置的电脑还慢。</p>

<p>window下搞开发实在很不方便，虽说有各种整合开发环境，但还是这欠缺那短少，比如iojs之类的构建、一些命令行下才可用的包，emacs之类的也很不方便……太多需要配置了。</p>

<p>还有另一个问题：由于开发用的电脑不是我的，没法重装系统。</p>

<p>项目经过分析之后，因为考虑到还需要构建两个适用于 安卓和苹果 系统的应用，未来可能还需要更多的应用编译。发现其实可以：.net继续后台，前台全部换用js。</p>

<p>如果，后面如果还是我负责，那就全换了。</p>

<p>经过几天郁闷的双电脑+双手机开发后，终于想到办法，解决这个 穿梭在各个平台设备开发的问题。</p>

<p>先总结下：</p>

<h2 id="section-1">我的需求：</h2>

<p>我的设备：一个手机（应该是两部，一部刚好换掉了），两台电脑（一台自己多年用的，所有东西都在上面，一台是项目的，里面已经备有各种相应开发工具，但不适用于我）</p>

<p>需求：平时开发只用一台电脑（当然是性能最好的那台），碎片时间用手机，在这台电脑和手机里，使用我熟悉和方便的工具，同时，收集到的经验，可以同步到我自己的电脑上。</p>

<h2 id="section-2">解决方案</h2>

<p>自己电脑：开发所需的东西，全用 git管理起来，可公开的全部github，不好公开的全部bitbucket或者gitlab 私库。</p>

<p>项目的电脑：尽可能少用其本身软件，只用虚拟机，并且把虚拟机快照化，这样可以快速启动所需的环境。</p>

<p>为了以备不时之需，还装了cygwin+emacs。</p>

<p>软件：
cygwin和虚拟机都装了git emacs</p>

<p>手机：一个编辑器+一个可管理git的工具。</p>

<h2 id="wincygwin">试图和win融合：cygwin</h2>

<p>一开始是想到用cygwin来实现，收集到了下面的工具和配置。</p>

<h3 id="cygwin">cygwin增强</h3>

<p>cygwin有一个软件管理工具apt-cyg 类似于debian的apt-get，有了这个就方便多了。</p>

<p>安装：</p>

<pre><code>lynx -source rawgit.com/transcode-open/apt-cyg/master/apt-cyg &gt; apt-cyg
install apt-cyg /bin
</code></pre>

<p>使用：</p>

<pre><code>apt-cyg install nano
</code></pre>

<p>可用操作：</p>

<ul>
  <li>remove 删除</li>
  <li>update 升级</li>
  <li>depends 某软件的依赖的列表</li>
  <li>rdepends 依赖某软件的列表</li>
  <li>list 列出本地软件</li>
  <li>listall 列出本地和远程软件</li>
  <li>show 某软件信息</li>
  <li>category 列出某类软件列表</li>
  <li>search 搜寻本地软件</li>
  <li>seacrchall 搜寻本地和远程软件</li>
</ul>

<h3 id="cygwinbabun">配置好的cygwin：babun</h3>

<p>如果自己配置觉得麻烦，可以使用已经配置好cygwin的 <a href="http://babun.github.io/">Babun</a> ，其中有些功能，比如：</p>

<ul>
  <li>pact – 软件包管理器</li>
  <li>集成oh-my-zsh</li>
  <li>配置好的git和shell</li>
  <li>自动升级</li>
</ul>

<p>Babun的安装也非常简单，从它的主页下载压缩包，解压，双击执行install.bat。</p>

<p>但是：在win7 babun下，emacs图形界面版有问题！！！</p>

<p>有个我没研究的问题，在babun下搞定了，就是配置可以访问win的其他目录：把几个关于window的盘符文件拷贝到cygwin的顶级目录下，即可。</p>

<h4 id="cygwin-">【转】cygwin 增强配置</h4>

<p>cygserver 服务器，用于运行大型的应用。Cygwin有一些特殊的功能, 如IPC Message Queues（消息队列）, XSI IPC Semaphores, XSI IPC Shared Memory（共享内存）.默认是没有打开的，要想使用这些功能, 必须先启动cygserver程序或服务</p>

<p>cygserver可以作为一个服务安装, 启用的方法如下：终端执行:</p>

<pre><code>$cygserver-config(按照提示配置)
$net start cygserver(cygserver作为Windows操作系统的一个服务运行)
$net stop cygserver(停止cygserver, 也可以在Windows任务管理器里结束进程)
</code></pre>

<p>在$CYGWIN/Cygwin.bat里添加下面的配置:</p>

<pre><code>$set CYGWIN=server
</code></pre>

<p>当然你也可以在每次需要的时候手动启动:</p>

<pre><code>$cygwinserver &amp;
</code></pre>

<p>或者在 ~/.bashrc 添加如下内容（或者在windows环境变量里面配置）</p>

<pre><code>CYGWIN=server
export CYGWIN
</code></pre>

<p>执行 . ~/.bashrc 让其生效</p>

<p>执行cygserver-config，并启动cygserver，</p>

<pre><code>net start cygserver
</code></pre>

<p>cygwin崩溃信息收集</p>

<p>在缺省的 cygwin 环境下出错时并不产生 core 文件，而是产生一个stackdump文件，该文件所含信息比core文件少，不能当作core文件使用，为了产生真正的core文件，可以配置好下面的环境变量：</p>

<pre><code>set CYGWIN="$CYGWIN error_start=dumper.exe -d %1 %2"(在d:\cygwin\Cygwin.bat文件里)
</code></pre>

<p>或者:</p>

<pre><code>export CYGWIN="$CYGWIN error_start=dumper.exe -d %1 %2"(在.bashrc文件里)
</code></pre>

<p>coredump时, cygwin会调用dumper.exe程序在当前目录下产生core文件. 但是不要对这个core文件抱太大的指望. 根据我的经验, 很多时候用bt列出的调用栈都是不可用的. 我也不知道为什么. 全局变量好像可以查看.</p>

<h2 id="section-3">虚拟机模拟</h2>

<p>摸索了几天cygwin后，感觉与其在一台电脑上构建一个cygwin，还不如直接虚拟机+快照，或者闪盘系统呢！！！这样完整且统一。</p>

<p>如果是小系统拷到内存中。反正现在内存够。</p>

<p>主要问题：cygwin的软件管理工具才刚起步，没有 类似 archlinux的 用户自治资源区（aur），没法方便查找和编译各种软件。</p>

<h3 id="section-4">准备工作：</h3>

<ul>
  <li>看看电脑主板是不是开启支持 硬件虚拟技术（Hardware Virtualization Technology (VT)），没开启就到bois开启。</li>
  <li><a href="https://www.virtualbox.org/wiki/Downloads">vbox下载地址</a>，根据宿主机操作系统类型选择下载。另外，还需要扩展下载，也就是那个<a href="">VirtualBox 4.3.26 Oracle VM VirtualBox Extension Pack</a></li>
</ul>

<p>本人的宿主机是win7，安装vbox问题，解决办法：</p>

<ul>
  <li>路径不含中文名</li>
  <li>恢复系统主题</li>
</ul>

<h3 id="section-5">安装操作系统</h3>

<p>可以直接安装，也可直接下载已经安装好的系统镜像，节省时间。</p>

<ul>
  <li><a href="http://virtualboxes.org/tag/ova">下载已有的镜像</a></li>
  <li><a href="http://kickass.to">搜镜像种子</a></li>
  <li>
    <p><a href="http://mirrors.neusoft.edu.cn/android/repository/">开源镜像站</a></p>
  </li>
  <li>开发用：sabayon 或者 archlinux+lxde 或者其他小型窗口管理器。用户名：archdev，密码：archdev。开发环境emacs，编译环境io.js cordova </li>
  <li>运行应用用：
    <ul>
      <li>给php的：coreos（网络不通！！！！）或者其他极简部署用系统 使用ubuntu server php 密码 php。 运行php类，java类，</li>
      <li>给 .net的：win 2008 server运行.net类，主机极致化。密码：1234567890</li>
    </ul>
  </li>
  <li>编译测试需要：
    <ul>
      <li>安卓虚拟机</li>
      <li>ios</li>
    </ul>
  </li>
</ul>

<p>sabayon 虽然根源于gentoo，但其内建双套软件管理工具的灵活机制，使得大部分不用编译。可支持开发经常需要的多版本共存。</p>

<p>支持两套软件管理工具：</p>

<ul>
  <li>entropy用来管理二进制包，相当于archlinux pacman</li>
  <li>portage 用来管理源码包，相当于 archlinux makepkg abs</li>
</ul>

<p>安装有问题，直接下载镜像解决。两个预定的用户名和密码： root/sabayon; sabayon/sabayon</p>

<h3 id="section-6">配置强化虚拟机系统</h3>

<p>安装完成后，就可以用了，但为了更方便使用，需要进行下面的配置，其中重点是配置：文件共享和网络服务</p>

<h4 id="vboxlinux">vbox虚拟机里的linux配置</h4>

<p>默认安装就可以进入虚拟系统了，想要更多功能，需要进行下面配置。</p>

<h4 id="archlinux-">archlinux 各种服务配置：</h4>

<p>安装 virtualbox-guest-modules  virtualbox-guest-utils virtualbox-guest-dkms</p>

<p>按安装后的提示，生成模块</p>

<p>加载模块：</p>

<pre><code>modprobe -a vboxguest vboxsf vboxvideo
</code></pre>

<p>启动服务</p>

<pre><code>systemctl enable vboxservice
</code></pre>

<p>手动启动各种vbox的服务：比如双向粘贴，双向拖动文件，无缝模式……</p>

<pre><code>VBoxClient
</code></pre>

<p>也可以一次启动所有 </p>

<pre><code>VBoxClientAll
</code></pre>

<p>让其启动即可使用这些服务：不过不建议这么做，因为出问题的时候，就没法救。如果有桌面，把VBoxClientAll 加入到autostart中，如果没有，就加入到  .xinitrc</p>

<h4 id="section-7">文件共享设置：</h4>

<p>把用户加入到vboxsf组中。</p>

<pre><code>gpasswd -a $USER vboxsf
</code></pre>

<p>使用 <code>VboxControl sharefolder</code> 自动加载</p>

<p>也可以手动加载：</p>

<pre><code>mount -t vboxsf shared_folder_name mount_point_on_guest_system
比如：
mount -t vboxsf -o uid=1000,gid=1000 home /mnt/
</code></pre>

<p>或者：</p>

<pre><code>mount.vboxsf
</code></pre>

<p>注意加载文件夹的权限：755</p>

<p>软链到桌面</p>

<pre><code>ln -s /media/ ~/my_documents
</code></pre>

<p>启动时自动加载：修改fstab</p>

<pre><code>xxx   /media/xxx    vboxsf  uid=user,gid=group,rw,dmode=700,fmode=600,comment=systemd.automount 0 0
</code></pre>

<p>换漂亮点的图标</p>

<p><a href="http://content.wuala.com/contents/csslayer/eyecandy/icons/oxygen-old.tar.bz2">kde4.6之前的图标好看，不足的部分应该可以用之后的图标补上</a></p>

<h3 id="mac-os">mac os虚拟机安装手记</h3>

<p>需要引导工具</p>

<p>下载镜像后，选择导入即可。</p>

<p>因为版本本身不稳定（比如点击 Apple icon –&gt; About This Mac，系统会崩溃），需要用 sw_vers 检查下版本：在启动界面，使用键盘快捷键Cmd + Space，开启命令行。（此处注意不要点按钮，会崩溃的）</p>

<p>键盘输入问题：安装 <a href="http://doublecommand.sourceforge.net/">DoubleCommand</a>，配置适合自己的输入方式。</p>

<p>然后<a href="http://developer.apple.com/programs/register/">注册苹果账号</a>，下载Xcode  和 iOS SDK。</p>

<p>打开工程项目文件  hello/platforms/ios/hello.xcodeproj</p>

<h3 id="linuxioscygwin">linux系统下的ios开发环境/cygwin也类似</h3>

<h2 id="section-8">手机开发测试环境配置</h2>

<ul>
  <li><a href="http://www.appsfinder.fr">查找应用</a></li>
  <li><a href="http://appcrawlr.com">另一个查找应用的地方</a></li>
</ul>

<h3 id="section-9">在手机上运行各种应用</h3>

<p>有空可探索：</p>

<ul>
  <li>Android + Linux Chroot + Node.js</li>
  <li>firefoxos + </li>
  <li>JXCore One of the key features in the recent release was the ability to run Node.js applications on mobile, both Android and iOS, while leveraging the full Node.js ecosystem on npm.</li>
</ul>

<p>除去直接硬刷linux系统到手机上外，还有三个软办法：</p>

<ul>
  <li>一是获得root权限，然后安装busybox之类的。</li>
  <li>另一个是编译安装 一个包管理器（等有空折腾debian的dpkg），</li>
  <li>最后一个比较方便的是 安卓上的编程环境 terminalIDE。</li>
</ul>

<p>英文输入键盘：手写用 writepad</p>

<p>英文虚拟电脑键盘用：terminal ide的键盘</p>

<p>生成 身份认证：和linux上的ssh-keygen不同。</p>

<pre><code>mkdir ~/.ssh        
dropbearkey -t rsa -f ~/.ssh/id_rsa
dropbearkey -y -f ~/.ssh/id_rsa | grep "^ssh-rsa" &gt;&gt; my_keydropbearkey -y -f ~/.ssh/id_rsa | sed -n 2p &gt; ~/.ssh/id_rsa.pub
</code></pre>

<p>第一条命令是新建文件夹，第二条命令是 生成 私钥，第三条是本地安全管道开启密钥认证，第四条是把公钥拷到 <em>my_key</em> 上，然后把 <em>my_key</em> 拷到所需的git服务器上。</p>

<p>修改下本地的配置</p>

<p>新建一文件 ~/sssh （名字随意，只要下面相应改下对应的），内容如下：</p>

<pre><code>#!/data/data/com.spartacusrex.spartacuside/files/system/bin/bash
exec ssh -i ~/.ssh/id_rsa "$@"
</code></pre>

<p>修改下执行权限和修改配置文件 ~/.bashrc</p>

<pre><code>chmod 755 ~/sssh
echo export GIT_SSH=~/sssh &gt;&gt; .bashrc
</code></pre>

<p>到这步搞定！</p>

<h3 id="section-10">附带几句牢骚：</h3>

<p>这几天被苹果系统问题卡住了所有的进度了：不是因为技术难度高，而是烦，尽搞些没用的限制——就有点像当年某些游戏用了俄国某种特别变态的加密程序，导致正版玩家体验也严重不爽一样，纯粹就是防贼防过头了。</p>

<p>你牛叉系统可以说是为了提升效率，所以虽然入门有点难度，但经历过入门的不适应期后，简直如鱼得水。</p>

<p>微软的系统可以说是为了适合一般人使用电脑，是以易用为追求的——虽然这个“易用”实在做得惨不忍睹。</p>

<p>苹果呢？号称是为了设计师，可是再怎么强大的苹果电脑，再怎么定制的软件，有 电脑+云渲染牛叉么？</p>

<p>苹果操作系统是专用系统？为最大化发挥苹果电脑硬件威力而造？是为了自己兼容性差找接口吧？苹果的根bsd也是高大上，可人家兼容性一点也没荒废，甚至还有号称兼容性举世无双的netbsd，人家也不难用，更不要说难装到其他系统上。</p>

<p>设定了一堆没必要的门槛，拦的是什么人呢？好像是自己用户，制造了一堆门槛，让没事干的人去琢磨，去消耗时间，获得一定的成就感，然后用来炫……这用户心理实在把握得不错。</p>

<p>结合苹果的娱乐消费倾向，还真的是一脉相承。</p>


  </article>

  <!-- 文章页面尾部设定 -->
<div class="post-end">
  
  <!-- 有言评论 -->
  <div id="uyan_frame">
    <h2>■评论</h2>
  </div>
  <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1921243"></script>

  <!-- 结束有言评论 -->

  <div class="post-shift">

    <!--上一篇 话题 下一篇-->
    
    <div class="post-pre">
      <a href="/%E6%95%A6%E7%85%8C%E4%B9%8B%E8%B7%AF/2015/04/13/%E6%97%A9%E5%B9%B2%E5%90%97%E5%8E%BB%E4%BA%86/">早干吗去了： 我缺骨干不缺项目◁◀前篇</a>
    </div>
    
    
    <!--回到头部-->
    <div class="back-top"><a href="#跨平台开发：穿梭多个系统平台的统一开发环境">△▲回头▲△</a></div> 
    
    
    <div class="post-next">
      <a href="/%E6%8A%80%E6%9C%AF%E8%A7%86%E9%87%8E/2015/04/19/%E4%BA%94%E7%AC%94%E5%88%92%E6%99%BA%E8%83%BD%E8%BE%93%E5%85%A5%E6%B3%95%E7%9C%9F%E7%9A%84%E5%BF%AB/">后篇▶▷五笔划+智能输入真的快</a>
    </div>
    
    
  </div>

  <!--页面底部自动浮现-->
  <div class="post-reletive">
    <!--相关文章-->

  </div>

</div>


  <footer class="site-footer">
  <ul>
    <li>
      <span>©2015版权所有：黑传说</span>
      <span>欢迎转载，请注明出处并保留原文链接，谢谢合作！</span>
    </li>
    <li>
    <span>黑传说——乌抵天明</span>
    <span>玄鸟负日，光明万丈</span>
    </li>    
    <li>
    <span><a href="mailto:gmail for jobinson99">gmail for jobinson99</a></span>
    <span><a href="/feed.xml">戳此处关注我</a></span>
    <span><a href="https://github.com/jobinson99">我的开发仓库</a></span>
    </li>    
    <li>
      <span>致谢： </br>
        <a href="http://www.github.com">空间：github</a>，
        <a href="http://jekyllrb.com">构建：jekyll</a>，
        <a href="http://freenom.com/">域名：freenom</a>，
        以及一切对本人有帮助的人事物！</span>
      <span>
        <!--百度统计-->
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fcc95332ab242dd5093ad15fa3eecb313' type='text/javascript'%3E%3C/script%3E"));
</script>

      </span>
    </li>
  </ul>
</footer>


    

  
</div>




      
    <script data-main="/themes/atlas/javascript/main" src="/themes/atlas/javascript/require.js" defer async="true"></script>
    
  </body>
</html>
